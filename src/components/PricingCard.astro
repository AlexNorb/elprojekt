---
import { pb } from "../utils";

interface Props {
    title: string;
    subtitle?: string;
    price: number;
    priceLabel?: string;
    priceSuffix?: string;
    includes?: string[];
    note?: string;
    greenTechDiscount?: boolean;
    greenTechText?: string;
    ctaText?: string;
    ctaLink?: string;
    image?: string;
}

const {
    title,
    subtitle,
    price,
    priceLabel = "från",
    priceSuffix = "kr",
    includes = [],
    note,
    greenTechDiscount = false,
    greenTechText,
    ctaText = "Begär offert",
    ctaLink = "/#contact-form",
    image,
} = Astro.props;
---

<div
    class="relative bg-gradient-to-br from-slate-900 to-slate-800 rounded-xl overflow-hidden shadow-2xl border border-slate-700"
>
    {/* Background Image */}
    {
        image && (
            <div class="absolute inset-0 opacity-20">
                <img src={image} alt="" class="w-full h-full object-cover" />
            </div>
        )
    }

    <div class="relative z-10 p-8">
        {/* Header */}
        <div class="text-center mb-6">
            <h3 class="text-2xl font-bold text-white font-display mb-1">
                {title}
            </h3>
            {subtitle && <p class="text-slate-400 text-sm">{subtitle}</p>}
        </div>

        {/* Price */}
        <div class="text-center mb-6">
            <div class="flex items-baseline justify-center gap-2">
                <span class="text-slate-400 text-lg">{priceLabel}</span>
                <span class="text-5xl font-bold text-white font-display"
                    >{price.toLocaleString("sv-SE")}</span
                >
                <span class="text-slate-400 text-lg">{priceSuffix}</span>
            </div>
            {
                greenTechDiscount && greenTechText && (
                    <div class="mt-3 inline-flex items-center px-3 py-1 bg-green-500/20 border border-green-500/30 rounded-full">
                        <span class="text-green-400 text-sm font-medium">
                            ✓ {greenTechText}
                        </span>
                    </div>
                )
            }
        </div>

        {/* Includes List */}
        {
            includes.length > 0 && (
                <ul class="space-y-3 mb-6">
                    {includes.map((item) => (
                        <li class="flex items-start text-slate-300">
                            <span class="text-elblue mr-3 mt-0.5">✓</span>
                            <span class="text-sm">{item}</span>
                        </li>
                    ))}
                </ul>
            )
        }

        {/* Note */}
        {
            note && (
                <p class="text-xs text-slate-500 text-center mb-6 italic">
                    {note}
                </p>
            )
        }

        {/* CTA */}
        <a
            href={pb(ctaLink)}
            class="block w-full text-center px-6 py-4 bg-elblue hover:bg-elblue-600 text-white font-bold rounded-lg transition-all transform hover:-translate-y-0.5 hover:shadow-xl"
        >
            {ctaText}
        </a>
    </div>
</div>
